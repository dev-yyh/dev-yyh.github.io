---
title: "정규화와 비정규화 이해 in 데이터베이스"
permalink: /DB/3
tags:
- DB
date: "2024-09-23"
description: "데이터베이스 정규화(1NF, 2NF, 3NF, BCNF) 및 비정규화의 개념, 목적, 장단점, 실제 적용 사례 등을 상세하고 체계적으로 살펴봅니다."
thumbnail: "/assets/img/thumbnail/DB.webp"
---

# 정규화와 비정규화 이해하기
---

데이터베이스 설계는 효율적이고 유지보수가 용이한 시스템을 구축하는 데 중요한 역할을 합니다.
이 과정에서 **정규화(Normalization)**와 **비정규화(Denormalization)**는 핵심적인 개념으로, 데이터의 일관성과 성능을 최적화하는 데 필수적입니다.
이번 글에서는 데이터 정규화와 비정규화의 개념, 목적, 장단점, 실제 적용 사례 등을 상세하고 체계적으로 살펴보겠습니다.

## 데이터 정규화란?
---

**정규화(Normalization)**는 관계형 데이터베이스에서 데이터의 중복을 최소화하고 데이터 무결성을 유지하기 위해 데이터를 구조화하는 과정입니다.
정규화를 통해 데이터베이스의 테이블을 논리적으로 나누고, 테이블 간의 관계를 정의함으로써 효율적인 데이터 관리와 검색이 가능해집니다.

### 정규화의 목적

1. **데이터 중복 최소화**: 같은 데이터가 여러 곳에 저장되지 않도록 해서 저장 공간을 절약하고 데이터 일관성을 유지합니다. 
2. **데이터 무결성 보장**: 데이터의 일관성과 정확성을 유지하여 오류를 방지합니다.
3. **유연한 데이터 구조**: 데이터베이스 구조의 변경이나 확장이 쉬워집니다.
4. **효율적인 데이터 관리**: 데이터 삽입, 수정, 삭제 시 발생할 수 있는 이상 현상을 줄입니다.

## 정규화의 단계 (정규형)
___

정규화는 여러 단계로 이루어지며, 각 단계는 특정한 규칙을 따릅니다. 각 정규형 단계마다 예시를 통해 구체적으로 살펴보겠습니다.

### 제1정규형 (1NF)

**제1정규형 (1NF)**은 모든 필드가 원자값(Atomic Value)을 가져야 하며, 각 열은 단일 값만을 포함하고 반복 그룹이나 배열을 포함해서는 안 되는 상태를 말합니다.

#### 1NF 조건:
- 모든 필드가 원자값을 가져야 합니다. 즉, 각 셀에는 단일 값만 포함되어야 합니다.

#### 예시

**1NF 위반된 테이블 (그룹 데이터 존재):**

| 학생ID | 학생이름  | 수강과목            |
|--------|------------|---------------------|
| 1      | 홍길동     | 수학, 과학          |
| 2      | 김영희     | 영어, 역사, 수학    |
| 3      | 이철수     | 과학                |

- **문제점:** `수강과목` 컬럼에 여러 과목이 하나의 셀에 들어가 있습니다. 이는 **그룹 데이터**이며, 1NF 규칙에 위배됩니다. 각 셀에 하나의 값만 있어야 합니다.

**1NF로 변환된 테이블:**

| 학생ID | 학생이름  | 수강과목 |
|--------|------------|-----------|
| 1      | 홍길동     | 수학      |
| 1      | 홍길동     | 과학      |
| 2      | 김영희     | 영어      |
| 2      | 김영희     | 역사      |
| 2      | 김영희     | 수학      |
| 3      | 이철수     | 과학      |

- **변환 후:** `수강과목` 컬럼에 각 학생이 수강하는 과목이 하나씩만 들어가도록 행을 분리했습니다. 이제 각 셀에 하나의 값만 포함되므로, 1NF를 만족하게 됩니다.

### 제2정규형 (2NF)

**제2정규형 (2NF)**은 먼저 1NF를 만족해야 하며, 부분 종속성을 제거하여 기본 키 전체에 종속되도록 하는 정규형입니다. 이는 복합 키를 사용하는 경우, 비기본 키 속성이 기본 키의 일부에만 종속되지 않도록 합니다.

#### 2NF 조건:
- **1NF**를 만족해야 합니다.
- 기본 키의 **일부**에만 종속된 속성(컬럼)이 없어야 합니다.

#### 예시

**2NF 위반된 테이블 (부분 종속성 존재):**

![Table violating 2NF](/assets/img/posts/DB/3/1.webp "Table violating 2NF")

- **기본 키**: `학생ID + 과목이름` (두 개의 컬럼이 기본 키로 묶여 있음)
- **문제점**: `성적`은 `학생ID + 과목이름`에 종속되지만, `교수이름`은 `과목이름`에만 종속됩니다. 이는 기본 키(`학생 ID, 과목이름`)의 일부에만 종속되는 **부분 종속성**이 존재함을 의미합니다.

**2NF로 변환된 테이블:**

![Table transformed into 2NF](/assets/img/posts/DB/3/2.webp "Table transformed into 2NF")

- **변환 후:** 성적 정보와 과목 정보가 별도의 테이블로 분리되어 **부분 종속성**이 제거되었습니다.

### 제3정규형 (3NF)

**제3정규형 (3NF)**은 2NF를 만족해야 하며, 이행 종속성을 제거하여 비기본 키 속성이 다른 비기본 키 속성에 종속되지 않도록 하는 정규형입니다.

#### 3NF 조건:
- **2NF**를 만족해야 합니다.
- 기본 키가 아닌 속성(비기본 키)이 다른 비기본 키에 종속되지 않아야 합니다.

#### 예시

**3NF 위반된 테이블 (이행 종속성 존재):**

![Table violating 3NF](/assets/img/posts/DB/3/3.webp "Table violating 3NF")

- **기본 키**: `학생ID`
- **문제점**: `주소`는 기본 키인 `학생ID`에 종속되어 있고 `우편번호`는 비기본 키인 `주소`에 종속되어 있습니다. 이는 `우편번호`가 `학생ID`를 통해 간접적으로 종속되는 **이행 종속성**이 존재함을 의미합니다.

**3NF로 변환된 테이블:**

![Table transformed into 3NF](/assets/img/posts/DB/3/4.webp "Table transformed into 3NF")

- **변환 후:** 우편번호가 별도의 주소 테이블로 분리되어 **이행 종속성**이 제거되었습니다.

### 보이스-코드 정규형 (BCNF)

**보이스-코드 정규형 (BCNF)**은 3NF를 만족하면서, 모든 결정자가 후보 키가 되도록 하는 정규형입니다. 이는 3NF의 조건을 강화한 것으로, 특정 상황에서 발생할 수 있는 이상 현상을 추가로 방지합니다.

#### BCNF 조건:
- **3NF**를 만족해야 합니다.
- 모든 결정자가 반드시 후보 키여야 합니다.

#### 예시

**BCNF를 위반된 테이블 (결정자중 후보키가 아닌 속성 존재):**

![Table violating BCNF](/assets/img/posts/DB/3/5.webp "Table violating BCNF")

- **기본키**: `학생ID + 과목이름` 
- **문제점**: `교수이름`은 `과목이름`을 결정하는 결정자이지만, 후보 키가 아닙니다. 즉, 결정자가 후보 키가 아닌 상황이 발생하여 BCNF를 위반하고 있습니다.

**BCNF로 변환된 테이블:**

![Table transformed into BCNF](/assets/img/posts/DB/3/6.webp "Table transformed into BCNF")

- **변환 후:** `교수이름`과 `과목이름`이 별도의 테이블로 분리되어 BCNF를 만족하게 되었습니다.

## 정규화의 장점과 단점
---

**장점:**

- **데이터 중복 감소**: 저장 공간 절약 및 데이터 일관성 유지.
- **데이터 무결성 향상**: 삽입, 삭제, 갱신 시 이상 현상 감소.
- **유연한 구조**: 데이터베이스의 확장과 유지보수가 용이.

**단점:**

- **조인 연산 증가**: 여러 테이블 간의 조인이 필요해져 쿼리 성능 저하 가능.
- **복잡한 쿼리 작성**: 데이터 접근 시 복잡한 쿼리가 필요할 수 있음.

## 데이터 비정규화란?
---

**비정규화(Denormalization)**는 데이터베이스의 성능을 높이기 위해 의도적으로 데이터 중복을 허용하거나, 테이블을 합치는 등의 구조 변경을 하는 과정입니다. 주로 조회 성능을 최적화하고, 복잡한 조인 연산을 줄이는 데 활용됩니다.

### 비정규화의 목적

1. **성능 향상**: 자주 조회되는 데이터를 한 테이블에 모아 조인 연산을 줄여 조회 속도를 개선합니다.
2. **쿼리 단순화**: 복잡한 조인이 필요 없도록 구조를 간소화하여 쿼리 작성과 유지보수를 쉽게 합니다.
3. **읽기 최적화**: 데이터 조회가 빈번한 환경에서 읽기 성능을 극대화합니다.

### 비정규화의 유형

1. **테이블 병합**: 관련 테이블을 하나로 합쳐 중복 데이터를 허용합니다. 
2. **중복 컬럼 추가**: 자주 사용되는 데이터를 여러 테이블에 중복 저장합니다.
3. **캐싱**: 계산된 결과나 집계 데이터를 별도로 저장하여 빠른 조회를 가능하게 합니다.
4. **인덱스 추가**: 검색 속도를 높이기 위해 인덱스를 추가하여 성능을 개선합니다.

## 비정규화의 장점과 단점
---

**장점:**

- **향상된 읽기 성능**: 조인 연산 감소로 데이터 조회 속도가 빨라집니다.
- **단순화된 쿼리**: 단일 테이블에서 필요한 데이터를 모두 가져올 수 있어 쿼리 작성이 간단해집니다.
- **빠른 응답 시간**: 특히 OLAP(온라인 분석 처리) 환경에서 유리합니다.

**단점:**

- **데이터 중복 증가**: 저장 공간이 늘어나고 데이터 일관성 유지가 어려워집니다.
- **복잡한 데이터 관리**: 삽입, 수정, 삭제 시 중복된 데이터를 모두 관리해야 합니다.
- **무결성 문제**: 중복 데이터로 인해 무결성 제약 조건 유지가 어려워집니다.

## 정규화와 비정규화의 비교
---

| **특징** | **정규화** | **비정규화** |
| --- | --- | --- |
| **목적** | 데이터 중복 최소화, 무결성 유지 | 성능 향상, 읽기 최적화 |
| **데이터 중복** | 최소화 | 의도적으로 중복 허용 |
| **쿼리 복잡성** | 조인 필요, 복잡한 쿼리 가능 | 조인 감소, 단순한 쿼리 가능 |
| **데이터 무결성** | 높음 | 낮아질 수 있음 |
| **저장 공간** | 절약 | 증가 |
| **유지보수** | 용이 | 복잡해질 수 있음 |
| **적용 사례** | OLTP(온라인 트랜잭션 처리) 시스템 | OLAP(온라인 분석 처리), 데이터 웨어하우스 시스템 |

## 실제 적용 사례
---

### 1. 전자상거래 웹사이트

**정규화 적용:**

- 고객, 주문, 상품 등의 데이터를 별도 테이블로 분리하여 데이터 무결성을 유지합니다.
- 예: 고객 테이블과 주문 테이블을 분리해 고객 정보 변경 시 모든 주문 기록에 일괄 수정이 가능합니다.

**비정규화 적용:**

- 자주 조회되는 주문 정보에 고객 이름이나 주소를 주문 테이블에 중복 저장합니다.
- 예: 주문 목록 페이지에서 고객 이름을 빠르게 표시하기 위해 고객 정보를 주문 테이블에 포함시킵니다.

### 2. 소셜 미디어 플랫폼

**정규화 적용:**

- 사용자, 게시물, 댓글 등의 데이터를 별도 테이블로 관리합니다. 
- 예: 사용자 테이블과 게시물 테이블을 분리해 사용자 정보 변경 시 게시물에 자동 반영됩니다.

**비정규화 적용:**

- 인기 게시물의 조회 속도를 높이기 위해 게시물에 좋아요 수나 댓글 수를 중복 저장합니다.
- 예: 게시물 테이블에 좋아요 수를 저장해 실시간으로 인기 게시물을 빠르게 조회합니다.

## 정규화와 비정규화의 최적화

---

데이터베이스 설계 시 정규화와 비정규화는 상호 배타적이지 않으며, 상황에 맞게 적절히 조합하여 사용하는 것이 중요합니다. 다음은 최적화를 위한 몇 가지 전략입니다.

1. **초기 설계는 정규화부터**: 데이터의 무결성과 일관성 유지를 위해 먼저 정규화된 구조로 설계합니다.
2. **성능 분석 후 비정규화 적용**: 실제 사용 시 성능 병목이 발견되면 해당 부분을 비정규화하여 최적화합니다.
3. **인덱스 활용**: 정규화된 데이터베이스에서도 적절한 인덱스를 활용하여 조회 성능을 향상시킬 수 있습니다.
4. **캐싱 전략 도입**: 자주 조회되는 데이터를 캐시하여 데이터베이스 접근을 줄입니다.
5. **모니터링 및 지속적인 최적화**: 데이터베이스 성능을 지속적으로 모니터링하고 필요에 따라 구조를 조정합니다.

## 결론

---

데이터 정규화와 비정규화는 데이터베이스 설계에서 핵심적인 역할을 합니다.
정규화는 데이터의 중복을 최소화하고 무결성을 유지하여 효율적인 데이터 관리를 가능하게 하지만, 때로는 성능 저하를 초래할 수 있습니다.
반면, 비정규화는 성능 향상을 위해 중복을 허용하지만, 데이터 무결성을 유지하는 데 어려움을 겪을 수 있습니다.
따라서 두 접근 방식의 장단점을 고려하여 적절히 균형을 맞추는 것이 중요합니다.